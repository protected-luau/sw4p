<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SW4P - One Time Access</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Courier New', Courier, monospace; }
        body { min-height: 100vh; background: #000; color: #0f0; display: flex; align-items: center; justify-content: center; overflow: hidden; position: relative; }
        #matrixCanvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; opacity: 0.4; pointer-events: none; }
        .glass-panel { position: relative; z-index: 10; background: rgba(0, 10, 0, 0.9); backdrop-filter: blur(10px); border: 2px solid #0f0; border-radius: 20px; padding: 2.5rem; width: 90%; max-width: 450px; text-align: center; box-shadow: 0 0 20px #0f05; }
        h1 { font-size: 2.5rem; letter-spacing: 5px; margin-bottom: 10px; text-shadow: 0 0 10px #0f0; }
        .access-denied { color: #f55; border: 1px solid #f55; padding: 20px; border-radius: 10px; background: #1a0000; }
        .key-box { background: #000; border: 1px dashed #0f0; padding: 15px; margin: 20px 0; cursor: pointer; }
        .key-display { font-size: 1.1rem; font-weight: bold; color: #0f0; }
        .timer { font-size: 2.5rem; font-weight: bold; color: #fff; margin: 10px 0; }
        .warning { font-size: 0.7rem; color: #ff0; margin-top: 10px; text-transform: uppercase; }
        .hidden { display: none !important; }
    </style>
</head>
<body>
    <canvas id="matrixCanvas"></canvas>
    <div class="glass-panel">
        <h1>SW4P</h1>
        
        <div id="denied" class="access-denied hidden">
            <h2>LINK EXPIRED</h2>
            <p style="margin-top:10px;">Refreshing or re-entering is not allowed. Get a new link from the script.</p>
        </div>

        <div id="granted" class="hidden">
            <div style="color: #0f0; font-size: 0.8rem;">[ SESSION ACTIVE ]</div>
            <div class="key-box" onclick="copyKey()">
                <div id="keyOutput" class="key-display">LOADING...</div>
                <div style="font-size: 0.6rem; color: #8f8; margin-top: 5px;">CLICK TO COPY</div>
            </div>
            <div style="font-size: 0.7rem; color: #888;">EXPIRES IN</div>
            <div id="timer" class="timer">60</div>
            <div class="warning">⚠️ DO NOT REFRESH OR YOU WILL BE BLOCKED ⚠️</div>
        </div>
    </div>

    <script>
        // Matrix Background
        (function(){const c=document.getElementById('matrixCanvas'),x=c.getContext('2d');let w,h,d=[];function r(){w=window.innerWidth,h=window.innerHeight,c.width=w,c.height=h;const n=Math.floor(w/16);for(let i=0;i<n;i++)d[i]=1}function dr(){x.fillStyle='rgba(0,0,0,0.1)',x.fillRect(0,0,w,h),x.fillStyle='#0f0',x.font='15px monospace';for(let i=0;i<d.length;i++){const t=String.fromCharCode(Math.random()*128);x.fillText(t,i*16,d[i]*16);if(d[i]*16>h&&Math.random()>0.975)d[i]=0;d[i]++}requestAnimationFrame(dr)}window.addEventListener('resize',r);r();dr()})();

        // LOGIKA ANTI-REFRESH & 60 DETIK
        const urlParams = new URLSearchParams(window.location.search);
        const currentSession = urlParams.get('session');
        const storageTag = "sw4p_used_" + currentSession;

        function generateKey(sess) {
            const h = new Date().getUTCHours();
            const seed = sess + h.toString();
            let hash = 0;
            for (let i = 0; i < seed.length; i++) hash = ((hash << 5) - hash) + seed.charCodeAt(i), hash |= 0;
            let val = Math.abs(hash), res = "", chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
            for (let i = 0; i < 16; i++) val = (val * 9301 + 49297) % 233280, res += chars[Math.floor((val / 233280) * chars.length)];
            return "SW4P_" + res;
        }

        function startSystem() {
            // Cek apakah session sudah pernah dibuka sebelumnya (Anti-Refresh)
            if (!currentSession || sessionStorage.getItem(storageTag)) {
                document.getElementById('denied').classList.remove('hidden');
                return;
            }

            // Tandai session sudah dipakai di memori tab ini
            sessionStorage.setItem(storageTag, "true");
            
            document.getElementById('granted').classList.remove('hidden');
            document.getElementById('keyOutput').innerText = generateKey(currentSession);

            let sec = 60;
            const tElem = document.getElementById('timer');
            const countdown = setInterval(() => {
                sec--;
                tElem.innerText = sec;
                if (sec <= 0) {
                    clearInterval(countdown);
                    document.getElementById('granted').classList.add('hidden');
                    document.getElementById('denied').classList.remove('hidden');
                    sessionStorage.clear();
                }
            }, 1000);
        }

        window.copyKey = function() {
            navigator.clipboard.writeText(document.getElementById('keyOutput').innerText);
            alert("Key copied! Paste it in Roblox quickly.");
        };

        startSystem();
    </script>
</body>
</html>
